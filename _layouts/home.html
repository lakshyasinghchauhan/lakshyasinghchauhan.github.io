---
layout: default
title: Blog
permalink: /
pagination:
  enabled: true
---
{% include lang.html %}

{% assign pinned_posts = site.posts | where: 'pin', true %}
{% assign normal_posts = paginator.posts | where_exp: 'post', 'post.pin != true and post.hidden != true' %}

<div id="post-list" class="flex-grow-1 px-xl-1">
  <div class="d-flex justify-content-center mb-3">
    <div class="btn-group" role="group" aria-label="Blog pages">
      <a href="/tags" class="btn btn-outline-secondary d-flex align-items-center gap-2">
        <i class="fas fa-tags"></i>
        <span>Tags</span>
      </a>
      <a href="/categories" class="btn btn-outline-secondary d-flex align-items-center gap-2">
        <i class="fas fa-folder-open"></i>
        <span>Categories</span>
      </a>
      <a href="/archives" class="btn btn-outline-secondary d-flex align-items-center gap-2">
        <i class="fas fa-archive"></i>
        <span>Archives</span>
      </a>
    </div>
  </div>
  <script type="application/json" id="sponsors-data">
    {{ site.data.sponsors | jsonify }}
  </script>
  <div id="sponsor-card-container"></div>
  <!--
    {% assign sponsors = site.data.sponsors %}
    {% if sponsors and sponsors.size > 0 %}
      {% assign random_index = "now" | date: "%s" | modulo: sponsors.size %}
      {% assign sponsor = sponsors[random_index] %}

      <article class="card-wrapper card">
        <a href="{{ sponsor.url }}" class="post-preview row g-0 flex-md-row-reverse" target="_blank" rel="noopener">
          <div class="col-md-5">
            <img src="{{ sponsor.image }}" alt="{{ sponsor.alt }}">
          </div>
          <div class="col-md-7">
            <div class="card-body d-flex flex-column">
              <h1 class="card-title my-2 mt-md-0">{{ sponsor.title }}</h1>
              <div class="card-text content mt-0 mb-3">
                <p>{{ sponsor.description }}</p>
              </div>
              <div class="post-meta flex-grow-1 d-flex align-items-end">
                <div class="me-auto">
                  <i class="fas fa-bullhorn fa-fw me-1"></i>
                  <span>Sponsored Content</span>
                </div>
              </div>
            </div>
          </div>
        </a>
      </article>
    {% endif %}
  -->

  {% if paginator.page == 1 %}
    {% for post in pinned_posts %}
      <article class="card-wrapper card">
        <a href="{{ post.url | relative_url }}" class="post-preview row g-0 flex-md-row-reverse">
          {% assign card_body_col = '12' %}
          {% if post.image %}
            {% assign src = post.image.path | default: post.image %}
            {% capture src %}{% include media-url.html src=src subpath=post.media_subpath %}{% endcapture %}
            {% assign alt = post.image.alt | xml_escape | default: 'Preview Image' %}
            {% assign lqip = null %}
            {% if post.image.lqip %}
              {% capture lqip_url %}{% include media-url.html src=post.image.lqip subpath=post.media_subpath %}{% endcapture %}
              {% assign lqip = 'lqip="' | append: lqip_url | append: '"' %}
            {% endif %}
            <div class="col-md-5">
              <img src="{{ src }}" alt="{{ alt }}" {{ lqip }}>
            </div>
            {% assign card_body_col = '7' %}
          {% endif %}

          <div class="col-md-{{ card_body_col }}">
            <div class="card-body d-flex flex-column">
              <h1 class="card-title my-2 mt-md-0">{{ post.title }}</h1>
              <div class="card-text content mt-0 mb-3">
                <p>{% include post-description.html %}</p>
              </div>
              <div class="post-meta flex-grow-1 d-flex align-items-end">
                <div class="me-auto">
                  <i class="far fa-calendar fa-fw me-1"></i>
                  {% include datetime.html date=post.date lang=lang %}
                  {% if post.categories.size > 0 %}
                    <i class="far fa-folder-open fa-fw me-1"></i>
                    <span class="categories">
                      {% for category in post.categories %}
                        {{ category -}}
                        {%- unless forloop.last %}, {% endunless %}
                      {% endfor %}
                    </span>
                  {% endif %}
                </div>
                {% if post.pin %}
                  <div class="pin ms-1">
                    <i class="fas fa-thumbtack fa-fw"></i>
                    <span>{{ site.data.locales[lang].post.pin_prompt }}</span>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>
        </a>
      </article>
    {% endfor %}
  {% endif %}

  {% for post in normal_posts %}
    <article class="card-wrapper card">
      <a href="{{ post.url | relative_url }}" class="post-preview row g-0 flex-md-row-reverse">
        {% assign card_body_col = '12' %}
        {% if post.image %}
          {% assign src = post.image.path | default: post.image %}
          {% capture src %}{% include media-url.html src=src subpath=post.media_subpath %}{% endcapture %}
          {% assign alt = post.image.alt | xml_escape | default: 'Preview Image' %}
          {% assign lqip = null %}
          {% if post.image.lqip %}
            {% capture lqip_url %}{% include media-url.html src=post.image.lqip subpath=post.media_subpath %}{% endcapture %}
            {% assign lqip = 'lqip="' | append: lqip_url | append: '"' %}
          {% endif %}
          <div class="col-md-5">
            <img src="{{ src }}" alt="{{ alt }}" {{ lqip }}>
          </div>
          {% assign card_body_col = '7' %}
        {% endif %}

        <div class="col-md-{{ card_body_col }}">
          <div class="card-body d-flex flex-column">
            <h1 class="card-title my-2 mt-md-0">{{ post.title }}</h1>
            <div class="card-text content mt-0 mb-3">
              <p>{% include post-description.html %}</p>
            </div>
            <div class="post-meta flex-grow-1 d-flex align-items-end">
              <div class="me-auto">
                <i class="far fa-calendar fa-fw me-1"></i>
                {% include datetime.html date=post.date lang=lang %}
                {% if post.categories.size > 0 %}
                  <i class="far fa-folder-open fa-fw me-1"></i>
                  <span class="categories">
                    {% for category in post.categories %}
                      {{ category -}}
                      {%- unless forloop.last %}, {% endunless %}
                    {% endfor %}
                  </span>
                {% endif %}
              </div>
              {% if post.pin %}
                <div class="pin ms-1">
                  <i class="fas fa-thumbtack fa-fw"></i>
                  <span>{{ site.data.locales[lang].post.pin_prompt }}</span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </a>
    </article>
  {% endfor %}
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const sponsorDataElement = document.getElementById('sponsors-data');
    if (!sponsorDataElement) return;

    const sponsors = JSON.parse(sponsorDataElement.textContent);
    if (!sponsors || sponsors.length === 0) return;

    const randomSponsor = sponsors[Math.floor(Math.random() * sponsors.length)];

    const container = document.getElementById('sponsor-card-container');
    container.innerHTML = `
      <article class="card-wrapper card pb-4">
        <a href="${randomSponsor.url}" class="post-preview row g-0 flex-md-row-reverse" target="_blank" rel="noopener">
          <div class="col-md-5">
            <img src="${randomSponsor.image}" alt="${randomSponsor.alt}">
          </div>
          <div class="col-md-7">
            <div class="card-body d-flex flex-column">
              <h1 class="card-title my-2 mt-md-0">${randomSponsor.title}</h1>
              <div class="card-text content mt-0 mb-3">
                <p>${randomSponsor.description}</p>
              </div>
              <div class="post-meta flex-grow-1 d-flex align-items-end">
                <div class="me-auto">
                  <i class="fas fa-bullhorn fa-fw me-1"></i>
                  <span>Sponsored Content</span>
                </div>
              </div>
            </div>
          </div>
        </a>
      </article>
    `;
  });
</script>

{% if paginator.total_pages > 1 %}
  {% include post-paginator.html %}
{% endif %}
